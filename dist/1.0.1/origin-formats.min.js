(function(){angular.module("ui.origin.formats",[]);var e=[];e["rg"]=9;e["cpf"]=11;e["cnpj"]=14;e["tel"]=11;e["cep"]=8;e["date"]=8;e["email"]=null;var t=[];t["rg"]="00.000.000-0";t["cpf"]="000.000.000.00";t["cnpj"]="00.000.000/0000-00";t["cep"]="00.000-00";t["date"]="00/00/0000";angular.module("ui.origin.formats").constant("sizes",e);angular.module("ui.origin.formats").directive("originFormat",["$Formatters","$Validators","$parse",function(n,r,i){return{restrict:"A",require:"?ngModel",link:function(s,o,u,a){var f=u.originFormat;var l=u.originMask;o.bind("keyup",function(){var o=a.$viewValue;var c=u.validateModel;var h=i(u.onValid);var p=i(u.onInvalid);if(!o)return;if(r[f]){var d=r[f](o,e[f]);s.$apply(function(){if(c){s[c]=d}if(h&&d){h(s)}if(p&&!d){p(s)}})}if(t[f]){o=n.formatCustom(o,e[f],t[f])}else if(n[f]){o=n[f](o,e[f])}else{o=n.formatCustom(o,e[f],f)}if(l){o=n.mask(o,l)}a.$setViewValue(o);a.$render()})}}}])})();(function(){angular.module("ui.origin.formats").service("$Formatters",function(){return{clean:function(e){return e.replace(/[^0-9]/g,"")},mask:function(e,t){},formatCustom:function(e,t,n){e=this.clean(e);e=this.trimSize(e,t);return this.format(e,n)},format:function(e,t){e=this.clean(e);var n="";var r=0;var i=0;for(r=0;r<e.length;r++){var s=t.charAt(i);var o=e.charAt(r);if(isNaN(s)||s==" "){i++;var u=true;var a=false;while(u){var f=t.charAt(i);if(isNaN(f)||f==" "){n+=(a?"":s)+f;a=true;i++}else{u=false}}if(a){n+=o}else n+=s+o}else{n+=o}i++}return n},trimSize:function(e,t){if(e.length>t){e=e.substring(0,t)}return e},email:function(e,t){return e},tel:function(e,t){e=this.clean(e);e=this.trimSize(e,t);var n=e.substring(0,2);var r=e.substring(2);if(n.length>1){n=n.replace(/(\d{0})(\d)/,"$1($2")+") "}if(e.length==11){r=r.replace(/(\d{5})(\d)/,"$1-$2");r=r.replace(/(\d{1})(\d)/,"$1 $2")}else{r=r.replace(/(\d{4})(\d)/,"$1-$2")}return n+r},real:function(e){return this.brazilianPattern(e)},euro:function(e){return this.americanPattern(e,"â‚¬")},dolar:function(e){return this.americanPattern(e,"$")},putsZeros:function(e){var t=parseInt(e);if(t<9){return"00"+t}else if(t<99){return"0"+t}if(e.substring(0,2)==="00"){return e.substring(2)}if(e.substring(0,1)==="0"){return e.substring(1)}return e},brazilianPattern:function(e){var t=e.substring(0,1)=="-"?"R$ -":"R$ ";e=this.clean(e);e=this.putsZeros(e);e=e.replace(/(\d{2})$/,",$1");e=e.replace(/(\d+)(\d{3},\d{2})$/g,"$1.$2");var n=(e.length-3)/3;var r=0;while(n>r){e=e.replace(/(\d+)(\d{3}.*)/,"$1.$2");r++}return t+e},americanPattern:function(e,t){var n=e.substring(0,1)=="-"?t+" -":t+" ";e=this.clean(e);e=this.putsZeros(e);e=e.replace(/(\d{2})$/,".$1");e=e.replace(/(\d+)(\d{3},\d{2})$/g,"$1,$2");var r=(e.length-3)/3;var i=0;while(r>i){e=e.replace(/(\d+)(\d{3}.*)/,"$1,$2");i++}return n+e}}})})();(function(){angular.module("ui.origin.formats").service("$Validators",["$Formatters",function(e){return{commonInvalid:function(e,t){if(e.length!=t){return false}for(var n=0;n<9;n++){var r="";for(var i=0;i<t;i++){r+=n}if(e==r){return true}}},cpf:function(t,n){t=e.clean(t);if(this.commonInvalid(t,n)){return false}var r=[];var i=0;var s=0;for(var o=0;o<t.length;o++){r[o]=parseInt(t.substring(o,o+1))}for(var o=0;o<9;o++){i+=r[o]*(o+1)}var u=i%11;u=u>9?0:u;if(u!=r[9]){return false}else{for(var o=0;o<10;o++){s+=r[o]*o}var a=s%11;a=a>9?0:a;if(a!=r[10]){return false}}return true},cnpj:function(t,n){t=e.clean(t);if(this.commonInvalid(t,n)){return false}tamanho=t.length-2;numeros=t.substring(0,tamanho);digitos=t.substring(tamanho);soma=0;pos=tamanho-7;for(var r=tamanho;r>=1;r--){soma+=numeros.charAt(tamanho-r)*pos--;if(pos<2)pos=9}resultado=soma%11<2?0:11-soma%11;if(resultado!=digitos.charAt(0))return false;tamanho=tamanho+1;numeros=t.substring(0,tamanho);soma=0;pos=tamanho-7;for(var r=tamanho;r>=1;r--){soma+=numeros.charAt(tamanho-r)*pos--;if(pos<2)pos=9}resultado=soma%11<2?0:11-soma%11;if(resultado!=digitos.charAt(1))return false;return true},email:function(e){var t=/[^@\-\.\w]|^[_@\.\-]|[\._\-]{2}|[@\.]{2}|(@)[^@]*\1/;var n=/@[\w\-]+\./;var r=/\.[a-zA-Z]{2,3}$/;if(e.search(t)!=-1||e.search(n)==-1||e.search(r)==-1){return false}else return true}}}])})()
